"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[342],{6262:(e,t)=>{t.A=(e,t)=>{const r=e.__vccOpts||e;for(const[e,o]of t)r[e]=o;return r}},8342:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var o=r(9726),n={id:"pay"},a={class:"row"},i={class:"form-group mt-2 col-md-12"},c=(0,o.Lk)("label",{class:"mb-1"}," Nome ",-1),s={key:0,class:"form-text text-danger"},l={class:"form-group mt-2 col-md-12"},u=(0,o.Lk)("label",{class:"mb-1"}," Sobrenome ",-1),m={key:0,class:"form-text text-danger"},d={class:"form-group mt-2 col-md-12"},p=(0,o.Lk)("label",{class:"mb-1"},"EMAIL:",-1),f={key:0,class:"form-text text-danger"},h={class:"form-group mt-2 col-md-12"},b=(0,o.Lk)("label",{class:"mb-1"},"CPF:",-1),v={key:0,class:"form-text text-danger"},y=(0,o.Lk)("input",{id:"docType",value:"CPF","data-checkout":"docType",type:"hidden"},null,-1),g=["value"],k={class:"text-right mt-2 d-grid gap-2"};var S=r(834),C=r(7695);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==P(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const j={props:[],components:{},data:function(){return{token_name:"buzzin",canSave:!1,firstname:"",lastname:"",cpf:"",email:"",errors:{cpf:"",firstname:"",lastname:"",email:""}}},computed:_(_({},(0,S.aH)({selectedPaymentMethod:function(e){return e.cart.selectedPaymentMethod},selectedAddress:function(e){return e.cart.selectedAddress},products:function(e){return e.cart.products.data},shippingMethods:function(e){return e.cart.shippingMethods},comment:function(e){return e.cart.comment},troco:function(e){return e.cart.troco},precisa_troco:function(e){return e.cart.precisa_troco},selectedShippingMethod:function(e){return e.cart.selectedShippingMethod},company:function(e){return e.tenant.company}})),{},{mpConfig:function(){return JSON.parse(this.selectedPaymentMethod.data)}}),created:function(){var e=this,t=document.createElement("script");t.src="https://secure.mlstatic.com/sdk/javascript/v1/mercadopago.js",t.addEventListener("load",(function(){window.Mercadopago.setPublishableKey(e.mpConfig.public_key)})),document.body.appendChild(t);var r=document.querySelector("iframe");r&&(document.body.removeChild(r),document.body.removeChild(t))},methods:_(_({},(0,S.PY)({clearCart:"CLEAR_CART",setPreloader:"SET_PRELOADER",setTextPreloader:"SET_TEXT_PRELOADER"})),{},{pay:function(){var e=this;if(this.reset(),this.validateForm(),this.canSave){var t={address:this.selectedAddress,products:this.products,shippingMethod:this.selectedShippingMethod,comment:this.comment,paymentMethod:this.selectedPaymentMethod,precisaTroco:this.precisa_troco?"Y":"N",troco:this.troco?this.troco:0,payment_integration_params:{first_name:this.firstname,last_name:this.lastname,payment_method_id:"slip",email:this.email,cpf:this.cpf.replace(/[^a-zA-Z0-9]/g,"")}},r=localStorage.getItem(this.token_name);this.setTextPreloader("Finalizando pedido...");var o=new URLSearchParams({token_company:this.company.uuid}).toString(),n="/api/auth/v1/mp-order?".concat(o);return axios.post(n,t,{headers:{Authorization:"Bearer ".concat(r)}}).then((function(t){var r=t.data.data;C.oR.success("Pedido realizado com sucesso",{autoClose:3e3}),e.clearCart(e.company.uuid),window.location.href="http://".concat(e.company.domain,"/app/cliente-area?identify=").concat(r.identify)})).catch((function(t){if(null!=t&&t.response){var r=t.response;e.errors=Object.assign(e.errors,r.data.errors)}C.oR.error("Falha ao gerar boleto, tente novamente",{autoClose:5e3})})).finally((function(){e.setTextPreloader("Carregando...")}))}},validateForm:function(){var e;return this.firstname?this.lastname?this.email?this.cpf?(null===(e=this.cpf)||void 0===e?void 0:e.length)<14?(this.canSave=!1,this.errors.cpf=["A quantida de caracteres informádo é inválido"]):void(this.canSave=!0):(this.canSave=!1,this.errors.cpf=["O CPF é um campo obrigatório"]):(this.canSave=!1,this.errors.email=["O email é um campo obrigatório"]):(this.canSave=!1,this.errors.lastname=["O sobrenome é um campo obrigatório"]):(this.canSave=!1,this.errors.firstname=["O nome é um campo obrigatório"])},clearCardForm:function(){this.firstname="",this.lastname="",this.cpf="",this.email=""},reset:function(){this.canSave=!1,this.errors={cpf:"",firstname:"",lastname:"",email:""}},b64:function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))},b64D:function(e){return decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},reverse:function(e){return e.split("").reverse().join("")},decode:function(e){e=this.reverse(e);for(var t=0;10!==t;)e=this.b64D(e),t++;return e},encode:function(e){for(var t=0;10!==t;)e=this.b64(e),t++;return this.reverse(e)}})};const E=(0,r(6262).A)(j,[["render",function(e,t,r,S,C,P){var O=(0,o.gN)("mask");return(0,o.uX)(),(0,o.CE)("form",n,[(0,o.Lk)("div",a,[(0,o.Lk)("div",i,[c,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.firstname=t}),class:"form-control form-control-sm"},null,512),[[o.Jo,e.firstname]]),""!=e.errors.firstname?((0,o.uX)(),(0,o.CE)("div",s,(0,o.v_)(e.errors.firstname[0]||""),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",l,[u,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.lastname=t}),class:"form-control form-control-sm"},null,512),[[o.Jo,e.lastname]]),""!=e.errors.lastname?((0,o.uX)(),(0,o.CE)("div",m,(0,o.v_)(e.errors.lastname[0]||""),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",d,[p,(0,o.bo)((0,o.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.email=t}),class:"form-control form-control-sm"},null,512),[[o.Jo,e.email]]),""!=e.errors.email?((0,o.uX)(),(0,o.CE)("div",f,(0,o.v_)(e.errors.email[0]||""),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",h,[b,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.cpf=t}),class:"form-control form-control-sm"},null,512),[[o.Jo,e.cpf],[O,"###.###.###-##"]]),""!=e.errors.cpf?((0,o.uX)(),(0,o.CE)("div",v,(0,o.v_)(e.errors.cpf[0]||""),1)):(0,o.Q3)("",!0),y,(0,o.Lk)("input",{id:"docNumber",value:e.cpf,"data-checkout":"docNumber",type:"hidden"},null,8,g)]),(0,o.Lk)("div",k,[(0,o.Lk)("button",{type:"submit",id:"form-checkout__submit",class:"btn btn-success",onClick:t[4]||(t[4]=(0,o.D$)((function(){return P.pay&&P.pay.apply(P,arguments)}),["prevent"]))}," Pagar ")])])])}]])}}]);